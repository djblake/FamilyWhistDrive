<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Tournament Data</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        .partnership { background: #f0f8ff; padding: 10px; margin: 5px 0; }
        .individual { background: #fff8dc; padding: 10px; margin: 5px 0; }
        pre { background: #f5f5f5; padding: 10px; overflow-x: auto; }
        .trump-suit { font-weight: bold; color: red; }
        .winner { background: #90EE90; }
        .loser { background: #FFB6C1; }
    </style>
</head>
<body>
    <h1>üîç Tournament Data Debug Page</h1>
    
    <div class="section">
        <h2>üìä Raw Tournament Data</h2>
        <div id="raw-data"></div>
    </div>
    
    <div class="section">
        <h2>üèÜ Final Standings</h2>
        <div id="standings-data"></div>
    </div>
    
    <div class="section">
        <h2>‚ô†Ô∏è Trump Suits by Round</h2>
        <div id="trump-data"></div>
    </div>
    
    <div class="section">
        <h2>üë• Partnership Analysis</h2>
        <div id="partnership-data"></div>
    </div>

    <script src="assets/js/tournament-engine.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            const tournamentEngine = new TournamentEngine();
            const sheetId = '1HGfdlDOfGHOL6Q4MP_TnF8UNE6YihBW-5gQs6Ykl78k';
            
            try {
                console.log('üîç Loading tournament data for debugging...');
                await tournamentEngine.loadFromGoogleSheets(sheetId);
                
                const tournaments = Array.from(tournamentEngine.tournaments.values());
                console.log('üìä Loaded Tournaments:', tournaments);
                
                // Display raw tournament data
                document.getElementById('raw-data').innerHTML = tournaments.map(tournament => `
                    <h3>${tournament.name} ${tournament.year}</h3>
                    <p><strong>Total Players:</strong> ${tournament.total_players}</p>
                    <p><strong>Total Rounds:</strong> ${tournament.total_rounds}</p>
                    <p><strong>Winner:</strong> ${tournament.winner}</p>
                    <p><strong>Runner-up:</strong> ${tournament.runner_up}</p>
                `).join('');
                
                // Display final standings
                document.getElementById('standings-data').innerHTML = tournaments.map(tournament => `
                    <h3>${tournament.name} ${tournament.year} - Final Standings</h3>
                    <table border="1" style="border-collapse: collapse; width: 100%; margin-bottom: 20px;">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player/Partnership</th>
                                <th>Total Tricks</th>
                                <th>Rounds</th>
                                <th>Average</th>
                                <th>Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${tournament.final_standings.map(standing => `
                                <tr class="${standing.is_partnership ? 'partnership' : 'individual'}">
                                    <td>${standing.position}</td>
                                    <td>${standing.player}</td>
                                    <td>${standing.total_tricks}</td>
                                    <td>${standing.rounds_played}</td>
                                    <td>${standing.average_tricks}</td>
                                    <td>${standing.is_partnership ? 'Partnership' : 'Individual'}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `).join('');
                
                // Display trump suits
                document.getElementById('trump-data').innerHTML = tournaments.map(tournament => `
                    <h3>${tournament.name} ${tournament.year} - Trump Suits</h3>
                    <table border="1" style="border-collapse: collapse; width: 100%; margin-bottom: 20px;">
                        <thead>
                            <tr>
                                <th>Round</th>
                                <th>Trump Suit</th>
                                <th>Tables</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${tournament.rounds.map(round => `
                                <tr>
                                    <td>${round.round}</td>
                                    <td class="trump-suit">${round.trump_suit}</td>
                                    <td>${round.tables.length}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `).join('');
                
                // Display partnership analysis
                document.getElementById('partnership-data').innerHTML = tournaments.map(tournament => `
                    <h3>${tournament.name} ${tournament.year} - Partnership Analysis</h3>
                    <div>
                        <h4>Sample Round Data (Round 1):</h4>
                        ${tournament.rounds.length > 0 ? `
                            <p><strong>Trump Suit:</strong> <span class="trump-suit">${tournament.rounds[0].trump_suit}</span></p>
                            <p><strong>Tables:</strong> ${tournament.rounds[0].tables.length}</p>
                            <h5>Partnerships in Round 1:</h5>
                            ${tournament.rounds[0].tables.map(table => `
                                <div style="margin: 10px 0; padding: 10px; border: 1px solid #ccc;">
                                    <strong>Table ${table.table}:</strong>
                                    ${table.partnerships.map(partnership => `
                                        <div style="margin: 5px 0; padding: 5px; background: #f9f9f9;">
                                            <strong>${partnership.players.join(' + ')}</strong> - ${partnership.tricks} tricks
                                            <br><small>vs ${partnership.opponents.join(' + ')}</small>
                                        </div>
                                    `).join('')}
                                </div>
                            `).join('')}
                        ` : '<p>No round data available</p>'}
                    </div>
                `).join('');
                
                console.log('‚úÖ Debug data loaded successfully!');
                
            } catch (error) {
                console.error('‚ùå Error loading tournament data:', error);
                document.getElementById('raw-data').innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
            }
        });
    </script>
</body>
</html> 